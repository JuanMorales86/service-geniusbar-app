import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{R as t}from"./index.BqJQxrZM.js";import{T as E}from"./ToastContainer.DziRUHsM.js";import"./_commonjsHelpers.CqkleIqs.js";const k=({options:a,value:m,onChange:v})=>{const[o,f]=t.useState(!1),[i,h]=t.useState(m);t.useEffect(()=>{h(m)},[m]);const p=r=>{const u=i.includes(r)?i.filter(b=>b!==r):[...i,r];h(u),v(u.join(", "))};return e.jsxs("div",{className:"container-create-multi-select ",children:[e.jsx("label",{htmlFor:"phonedetails",className:"labelinput-custom",children:"Detalles del equipo"}),e.jsxs("div",{className:`custom-multi-select ${o?"open":""}`,children:[e.jsx("div",{className:"select-header",onClick:()=>f(!o),children:i.length>0?i.join(", "):"Seleccionar opciones"}),o&&e.jsx("div",{className:"options-container rounded-b-md",children:a.map((r,u)=>e.jsx("div",{className:`option ${i.includes(r.description)?"bg-sky-700":""}`,onClick:()=>p(r.description),children:r.description},u))})]})]})},F=console.log.bind(console);F("Service create orders form component loaded");const C={clientname:"",clientdni:"",email:"",phone:"",deviceType:"",model:"",serial:"",phonedetails:"",issue:"",devicepassword:""},O=[{description:"Rayaduras en la carcaza"},{description:"Rayaduras en la pantalla"},{description:"No muestra imagen"},{description:"Enciende pero no muestra video o imagen"},{description:"Pantalla rota"},{description:"Pantalla presenta lineas de colores fijas verticales anormales"},{description:"Pantalla presenta lineas de colores fijas horizontales anormales"},{description:"Pantalla con marcas"},{description:"Pantalla astillada"},{description:"Pantalla cambiada"},{description:"Tapa trasera del equipo esta rota o astillada"},{description:"Equipo no toma señal de operadora"},{description:"Equipo no toma WiFi"},{description:"Equipo no toma carga"},{description:"Equipo no toma BlueTooth"},{description:"Golpes en los bordes"},{description:"Faltan boton Home"},{description:"Faltan boton Power"},{description:"Faltan botones de Volumen"},{description:"Faltan botones en las teclas"},{description:"Boton de silencio no funciona"},{description:"Chip de la bateria sin funcionar o perdido"},{description:"Chip de la pantalla no reconocido o sin TrueTone"},{description:"Bateria cambiada"},{description:"Batería no esta en el equipo"},{description:"Bateria esta inchada"},{description:"Bateria esta gastada"},{description:"Bateria esta dañada"},{description:"Face ID no funciona"},{description:"Placa madre en corto"},{description:"Equipo Mojado"},{description:"Equipo se recibe parcialmente abierto"},{description:"Equipo se recibe abierto por bateria inchada"},{description:"Equipo ya ha sido revisado por otro servicio tecnico"},{description:"Equipo con fallas en el sistema operativo"},{description:"Bandeja SIM perdida"},{description:"Bandeja SIM rota"},{description:"Equipo enciende y se cuelga en la manzana"},{description:"Equipo no enciende"},{description:"Equipo se reinicia constantemente"},{description:"Equipo con numero de error"},{description:"Equipo vuelve por garantia"},{description:"Otros detalles"}];function M(){const[a,m]=t.useState(C),[v,o]=t.useState(!1),[f,i]=t.useState(""),[h,p]=t.useState(""),[r,u]=t.useState("text-lime-500/90"),[b,j]=t.useState(""),[T,g]=t.useState(""),[n,x]=t.useState({isValid:!0,isChecking:!1,wasChecked:!1});let y;const N=()=>{m(C),x({isValid:!0,isChecking:!1,wasChecked:!1})},w=async c=>{x(s=>({...s,isChecking:!0}));try{const d=await(await fetch("/api/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})})).json();x({isValid:d.isValid,isChecking:!1,wasChecked:!0}),!d.isValid&&!n.isChecking&&setTimeout(()=>{i("Email no válido o dominino inexistente "),p("error"),o(!0),setTimeout(()=>o(!1),2e3)},1e3)}catch(s){console.error("Error varificando el email:",s),x({isValid:!1,isChecking:!1,wasChecked:!0})}},l=c=>{const{name:s,value:d}=c.target;m({...a,[s]:d}),s==="email"&&d&&(clearTimeout(y),y=setTimeout(()=>w(d),1e3))},S=()=>{window.location.href="/ordershow-page"},q=async c=>{c.preventDefault(),i("Enviando Orden....."),p("info"),g("top"),j("end"),o(!0);try{const s=await fetch("/api/createOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});console.log("Response received:",s);const d=await s.json();console.log("Response data:",d),s.ok&&d.success?(i("Orden Creada Sastisfactoriamente"),p("success"),N()):(i("Error al crear la orden"),p("error"))}catch(s){console.error("Error al enviar el formulario",s),i("Error al crear la orden"),p("error")}g("top"),j("end"),o(!0),setTimeout(()=>o(!1),5e3)};return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-blend-lighten",children:e.jsxs("div",{className:"bg-gradient-sweep animate-gradient-sweep text-mainbrand-light dark:text-mainbrand-light p-8 rounded-lg dark:border dark:border-light-bg shadow-lg w-full max-w-4xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Hoja de Servicio Técnico"}),e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"clientname",className:"labelinput-custom",children:"Nombre Cliente"}),e.jsx("input",{type:"text",name:"clientname",id:"clientname",value:a.clientname,onChange:l,required:!0,placeholder:"Carlos",className:"form-inputbox"})]}),e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"clientdni",className:"labelinput-custom",children:"DNI"}),e.jsx("input",{type:"text",name:"clientdni",id:"clientdni",value:a.clientdni,onChange:l,required:!0,minLength:8,placeholder:"29115230",className:"form-inputbox"})]}),e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"email",className:"labelinput-custom",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",id:"email",value:a.email,onChange:l,placeholder:"cliente@mail.com",className:`form-inputbox ${n.wasChecked&&!n.isValid?"border-redCrayola":""}
                ${n.wasChecked&&n.isValid?"border-lime-500":""}`}),n.isChecking&&e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-sky-500 text-sm animate-pulse",children:"Verificando email..."}),n.wasChecked&&!n.isChecking&&e.jsx("span",{className:`asolute right-2 top-1/2 -translate-y-1/2 ${n.isValid?"text-lime-500":"text-redCrayola"}`,children:n.isValid?"🆗":"❌"})]})]}),e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"phone",className:"labelinput-custom",children:"Teléfono"}),e.jsx("input",{type:"text",name:"phone",id:"phone",value:a.phone,onChange:l,required:!0,minLength:10,placeholder:"1130561068",className:"form-inputbox"})]}),e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"deviceType",className:"labelinput-custom",children:"Tipo de dispositivo"}),e.jsx("input",{type:"text",name:"deviceType",id:"deviceType",value:a.deviceType,onChange:l,required:!0,placeholder:"Celular/Laptop/Otro",className:"form-inputbox"})]}),e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"model",className:"labelinput-custom",children:"Modelo del equipo"}),e.jsx("input",{type:"text",name:"model",id:"model",placeholder:"Iphone 15",value:a.model,onChange:l,required:!0,className:"form-inputbox"})]}),e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"serial",className:"labelinput-custom",children:"Número de serie"}),e.jsx("input",{type:"text",name:"serial",id:"serial",value:a.serial,onChange:l,placeholder:"A1708",className:"form-inputbox"})]}),e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"devicepassword",className:"labelinput-custom",children:"Contraseña del dispositivo"}),e.jsx("input",{type:"password",name:"devicepassword",id:"devicepassword",value:a.devicepassword,onChange:l,required:!0,placeholder:"123456",minLength:4,className:"form-inputbox"})]})]}),e.jsxs("div",{className:"space-y-2 transition-all duration-300 hover:transform hover:scale-105",children:[e.jsx("label",{htmlFor:"issue",className:"labelinput-custom",children:"Problemas"}),e.jsx("textarea",{name:"issue",id:"issue",value:a.issue,onChange:l,required:!0,placeholder:"Descripcion del caso",className:"textarea-custom",rows:"3"})]}),e.jsx(k,{options:O,value:a.phonedetails?a.phonedetails.split(",").map(c=>c.trim()).filter(Boolean):[],onChange:c=>{m(s=>({...s,phonedetails:c}))}}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{type:"submit",className:"btn-custom-orders",children:"Crear Orden"}),e.jsx("button",{type:"button",onClick:()=>{N(),i("Fomluario Borrado"),g("middle"),j("bottom"),o(!0),p("warning"),setTimeout(()=>o(!1),5e3),u("text-redCrayola")},className:"btn-custom-orders",children:"Borrar Formulario"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:S,className:"btn-custom-orders",children:"Mostrar Ordenes"})})]}),v&&e.jsx(E,{message:f,type:h,positionV:b,positionH:T,color:r,onClose:()=>o(!1)})]})})}export{M as default};
