---
import Layout from "@/layouts/Layout.astro";

// src/pages/positionmap.astro


// Obtener la clave de API desde las variables de entorno de Astro
const Maps_API_KEY = import.meta.env.GOOGLE_MAPS_API_KEY;

// Define las opciones del mapa
const mapConfig = {
  center: { lat: -34.6037, lng: -58.3816 }, // Coordenadas de Buenos Aires (AJUSTA ESTO A TU NEGOCIO)
  zoom: 15,
  apiKey: Maps_API_KEY,
};

const seoData = {
  title: "Reparación de iPhone - Genius Bar Service en Argentina",
  description: "Expertos en reparación de iPhone: cambio de pantalla, batería, cámara, puertos de carga y más. Usamos repuestos originales con garantía. ¡Consulta ahora!",
  keywords: "reparación iPhone, cambio pantalla iPhone, reparación batería iPhone, servicio técnico Apple, Genius Bar Argentina",
  image: "https://i.imgur.com/oxpU3fM.png?format=webp",
  url: "https://geniusbarservice.com/serviceiphone"
}

---

<Layout {...seoData}>
    <div id="map-container" style="height: 500px; width: 100%;">
        <h1>ESTAMOS UBICACOS EN:</h1>
    </div>
</Layout>

  <script define:vars={{ mapConfig }} type="module">
    // Importa la función desde tu archivo .ts.
    // La ruta relativa debe ser correcta desde este archivo .astro.
    import { loadAndInitMap } from '../components/GoogleMaps.ts';

    // Ejecuta la función de inicialización del mapa cuando el DOM esté listo
    document.addEventListener('DOMContentLoaded', () => {
      // Usa las variables que pasamos desde el frontmatter con define:vars
      loadAndInitMap('map-container', mapConfig);
    });
  </script>
